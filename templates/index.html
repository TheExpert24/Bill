<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bill</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .user-avatar { width: 40px; height: 40px; border-radius: 50%; }
        .user-initial { width: 40px; height: 40px; border-radius: 50%; background: #007bff; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .login-btn, .logout-btn { padding: 8px 16px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; }
        .login-btn:hover, .logout-btn:hover { background: #0056b3; }
        form { max-width: 400px; }
        label { display: block; margin-top: 10px; }
        input, select { width: 100%; padding: 8px; margin-top: 5px; }
        button { margin-top: 20px; padding: 10px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .login-required { background: #f8f9fa; padding: 15px; border-radius: 4px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Bill</h1>
        <div class="user-info">
            {% if user %}
                <div class="user-initial">{{ user.first_name[0]|upper }}{{ user.last_name[0]|upper }}</div>
                <span>Welcome, {{ user.first_name }}!</span>
                <a href="/logout" class="logout-btn">Logout</a>
            {% else %}
                <a href="/login" class="login-btn">Sign in with Google</a>
            {% endif %}
        </div>
    </div>
    
    {% if user %}
        <p>Enter your investment requirements and goals. Bill will automatically help you invest in the stock market.</p>
        <form method="POST">
            <label for="capital">Total Capital ($):</label>
            <input type="number" id="capital" name="capital" required min="100">

            <label for="risk_tolerance">Risk Tolerance (% per trade):</label>
            <input type="number" id="risk_tolerance" name="risk_tolerance" required min="0.1" max="10" step="0.1" value="2">

            <label for="goal">Investment Goal:</label>
            <select id="goal" name="goal" required>
                <option value="conservative">Conservative (Lower risk, steady returns)</option>
                <option value="moderate" selected>Moderate (Balanced risk and return)</option>
                <option value="aggressive">Aggressive (Higher risk, higher potential returns)</option>
            </select>

            <label for="time_horizon">Time Horizon:</label>
            <select id="time_horizon" name="time_horizon" required>
                <option value="short">Short-term (Days to weeks)</option>
                <option value="medium" selected>Medium-term (Weeks to months)</option>
                <option value="long">Long-term (Months to years)</option>
            </select>

            <button type="submit">Get Recommendations</button>
        </form>
        
        <div style="margin-top: 30px;">
            <a href="/accounts" style="padding: 10px; background: #28a745; color: white; text-decoration: none; border-radius: 4px;">View My Recommendations History</a>
        </div>
    {% else %}
        <div class="login-required">
            <h3>Please sign in to access investment recommendations</h3>
            <p>You need to sign in with your Google account to get personalized investment recommendations and save your investment history.</p>
            <a href="/login" class="login-btn">Sign in with Google</a>
        </div>
    {% endif %}
</body>
</html>
